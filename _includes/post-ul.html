{%- assign plang = page.lang | default: site.langs[0] | default: "none" -%}
{%- assign nblang = site.langs | size -%}

<ul class="post-list">
  {%- if plang != "none" and nblang > 1 -%}
    {%- assign posts = site.posts | where:"lang",plang -%}
  {%- else -%}
    {%- assign posts = site.posts -%}
  {%- endif -%}

  <!-- This loops through the paginated posts -->
  {%- for post in paginator.posts -%}
    {%- include post-li.html -%}
  {%- endfor -%}
</ul>

{%- if paginator.total_pages > 1 -%}
<div class="pagination">
  {%- if paginator.previous_page -%}
    <a href="{{ paginator.previous_page_path | relative_url }}">&laquo; Prev</a>
  {%- else -%}
    <span>&laquo; Prev</span>
  {%- endif -%}

  {%- for page in (1..paginator.total_pages) -%}
    {%- if page == paginator.page -%}
      <em>{{ page }}</em>
    {%- elsif page == 1 -%}
      <a href="{{ paginator.previous_page_path | relative_url }}">{{ page }}</a>
    {%- else -%}
      <a href="{{ site.paginate_path | relative_url | replace: ':num', page }}">{{ page }}</a>
    {%- endif -%}
  {%- endfor -%}

  {%- if paginator.next_page -%}
    <a href="{{ paginator.next_page_path | relative_url }}">Next &raquo;</a>
  {%- else -%}
    <span>Next &raquo;</span>
  {%- endif -%}
</div>
{%- endif -%}
